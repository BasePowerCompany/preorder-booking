!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";const e=["zip","state","country","city","address","street_2","formatted_address","postal_code_availability","postal_code_availability_serving_now"],n=n=>{e.forEach((e=>((e,n)=>{try{e.querySelector(`input[name="${n}"]`).parentElement.parentElement.style.display="none"}catch(e){console.log("cannot hide field",n)}})(n,e)))},t=e=>{n(e),e.appendChild((()=>{let e='\n  html, body, input, button, label, select {\n    font-family: PP Neue Montreal Variable, sans-serif !important,\n  }\n  input, button {\n    -webkit-appearance:none;\n  }\n  .form-preview-container {\n    background-color: #ffffff;\n  }\n  /* reset */\n  form[class*="hs-form"] *,\n  form[class*="hs-form"] *::before,\n  form[class*="hs-form"] *::after {\n    box-sizing: border-box;\n  }\n  form[class*="hs-form"] {\n    display: flex;\n    flex-wrap: wrap;\n    flex-direction: column;\n    gap: 1rem;\n    font-family: PP Neue Montreal Variable, sans-serif,\n  }\n  form[class*="hs-form"] fieldset { max-width: none; display: flex; flex-wrap: wrap; }\n  form[class*="hs-form"] fieldset > .field.hs-form-field { width: 1px; flex-grow: 1; min-width: 230px; }\n  form[class*="hs-form"] .field.hs-form-field { flex-grow: 1; min-width: 230px; }\n  form[class*="hs-form"] .field.hs-form-field .input { margin-right: 0; }\n  form[class*="hs-form"] .field.hs-form-field .input input,\n  form[class*="hs-form"] .field.hs-form-field .input select,\n  form[class*="hs-form"] .field.hs-form-field .input textarea\n   {\n    width: 100%;\n    resize: none;\n    background: white;\n    outline: none;\n    border: 1px solid black;\n    transition: .2s all;\n    font-family: PP Neue Montreal Variable, sans-serif,\n  }\n  \n  form[class*="hs-form"] .field.hs-form-field .input textarea {\n    min-height: 150px;\n  }\n  \n  \n  form[class*="hs-form"] fieldset { \n    gap: 1rem 12px; \n  }\n  \n\n  form[class*="hs-form"] .field.hs-form-field .input input,\n  form[class*="hs-form"] .field.hs-form-field .input select {\n    height: 44px;\n    line-height: 44px;\n    padding: 0 24px;\n    border: none;\n  }\n\n  form[class*="hs-form"] .field.hs-form-field .input input,\n  form[class*="hs-form"] .field.hs-form-field .input select,\n  form[class*="hs-form"] .field.hs-form-field .input textarea {\n    font-weight: 400;\n    border-style: solid;\n    font-size: 15px;\n    letter-spacing: 0px;\n    height: 44px;\n    padding: 0 16px !important;\n    border-color: #EFF1F2;\n    color: #090D0FEB;\n    background-color: #EFF1F2;\n    border-width: 0px;\n    border-radius: 12px;\n  }\n  form[class*="hs-form"] .field.hs-form-field .input textarea {\n    height: 150px;\n    padding: 16px !important;\n  }\n\n  form[class*="hs-form"] .field.hs-form-field .input input::placeholder,\n  form[class*="hs-form"] .field.hs-form-field .input select:invalid,\n  form[class*="hs-form"] .field.hs-form-field .input textarea::placeholder {\n    color: #020B0F5C;font-weight: 400;letter-spacing: 0px;\n  }\n\n\n  form[class*="hs-form"] .field.hs-form-field > label {\n    display: block;\n    font-weight: 600;color: #000000;font-size: 15px;margin-bottom: 8px;letter-spacing: 0px;text-transform: capitalize;\n  }\n\n  form[class*="hs-form"] .inputs-list label {\n    display: block;\n    border-style: solid;border-width: 0px;border-radius: 0px;padding: 8px 0px 0px 0px;color: #c95151;border-color: #d02525;font-size: 14px;font-weight: 400;\n  }\n\n\n  form[class*="hs-form"] .actions input[type="submit"] {\n    display: flex;\n    justify-content: center;\n    width: 100%;\n    cursor: pointer;\n    line-height: 44px;\n    outline: none;\n    border: none;\n    transition: .2s all;\n    border-style: solid;\n    color: white;\n    font-weight: 400;font-size: 15px;letter-spacing: 0px;height: 44px;padding: 0 32px;color: white;background-color: #0F9954;border-width: 0px;border-radius: 12px;text-align: center;\n  }\n\n  form[class*="hs-form"] .actions input[type="submit"]:hover {\n    font-size: 15px;\n    background-color: #0F9954;\n  }\n\n  form[class*="hs-form"] .hs_error_rollup {\n    display: none;\n  }\n\n  form[class*="hs-form"] .hs-error-msgs li { list-style: none; margin-left: 0; }\n\n  div[class*="hs-form"].submitted-message {\n    background-color: #6c42e0;border-width: 1px;border-radius: 8px;padding: 16px;text-align: center;color: #ffffff;font-size: 18px;\n  }\n\n  div[class*="hs-form"].submitted-message p {\n    color: #ffffff;\n}';e+='\n.hs-form__virality-link {\n  display: none !important;\n}\n.hs-form .field {\n  margin-bottom: 0 !important;\n}\n\nform[class*="hs-form"] .field.hs-form-field > label {\n  display: none;\n}\n\n.hs_submit.hs-submit .actions {\n  padding: 0 !important;\n  margin: 0 !important;\n}\n\nform[class*="hs-form"] {\n  padding-bottom: 30px;\n}\n\n';const n=document.createElement("style");return n.innerHTML=e.trim(),n})())},o=e=>({update:n=>{try{window[e]=Object.assign(Object.assign({},window[e]),n)}catch(e){}},get:()=>{try{return window[e]}catch(e){return{}}}}),s=o("hsFormStateBooking"),r=o("hsFormStateNewsletter"),i=e=>"0"in e&&"length"in e&&1===e.length?e[0]:e;function l(){}function a(e,n){for(const t in n)e[t]=n[t];return e}function c(e){return e()}function d(){return Object.create(null)}function u(e){e.forEach(c)}function f(e){return"function"==typeof e}function p(e,n){return e!=e?n==n:e!==n||e&&"object"==typeof e||"function"==typeof e}let m,h;function g(e,n,t){e.$$.on_destroy.push(function(e,...n){if(null==e)return l;const t=e.subscribe(...n);return t.unsubscribe?()=>t.unsubscribe():t}(n,t))}function b(e){const n={};for(const t in e)"$"!==t[0]&&(n[t]=e[t]);return n}function y(e,n){e.appendChild(n)}function v(e,n,t){e.insertBefore(n,t||null)}function w(e){e.parentNode&&e.parentNode.removeChild(e)}function x(e){return document.createElement(e)}function _(e){return document.createTextNode(e)}function $(){return _(" ")}function S(e,n,t,o){return e.addEventListener(n,t,o),()=>e.removeEventListener(n,t,o)}function E(e,n,t){null==t?e.removeAttribute(n):e.getAttribute(n)!==t&&e.setAttribute(n,t)}function k(e,n){n=""+n,e.data!==n&&(e.data=n)}function A(e,n,t){e.classList[t?"add":"remove"](n)}function F(e){h=e}function C(){if(!h)throw new Error("Function called outside component initialization");return h}function j(e){C().$$.on_mount.push(e)}function z(){const e=C();return(n,t,{cancelable:o=!1}={})=>{const s=e.$$.callbacks[n];if(s){const r=function(e,n,{bubbles:t=!1,cancelable:o=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(e,t,o,n),s}(n,t,{cancelable:o});return s.slice().forEach((n=>{n.call(e,r)})),!r.defaultPrevented}return!0}}const O=[],P=[];let L=[];const q=[],N=Promise.resolve();let T=!1;function B(e){L.push(e)}const K=new Set;let M=0;function V(){if(0!==M)return;const e=h;do{try{for(;M<O.length;){const e=O[M];M++,F(e),I(e.$$)}}catch(e){throw O.length=0,M=0,e}for(F(null),O.length=0,M=0;P.length;)P.pop()();for(let e=0;e<L.length;e+=1){const n=L[e];K.has(n)||(K.add(n),n())}L.length=0}while(O.length);for(;q.length;)q.pop()();T=!1,K.clear(),F(e)}function I(e){if(null!==e.fragment){e.update(),u(e.before_update);const n=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,n),e.after_update.forEach(B)}}const D=new Set;function R(e,n){e&&e.i&&(D.delete(e),e.i(n))}function H(e,n,t,o){const{fragment:s,after_update:r}=e.$$;s&&s.m(n,t),o||B((()=>{const n=e.$$.on_mount.map(c).filter(f);e.$$.on_destroy?e.$$.on_destroy.push(...n):u(n),e.$$.on_mount=[]})),r.forEach(B)}function U(e,n){const t=e.$$;null!==t.fragment&&(!function(e){const n=[],t=[];L.forEach((o=>-1===e.indexOf(o)?n.push(o):t.push(o))),t.forEach((e=>e())),L=n}(t.after_update),u(t.on_destroy),t.fragment&&t.fragment.d(n),t.on_destroy=t.fragment=null,t.ctx=[])}function G(e,n){-1===e.$$.dirty[0]&&(O.push(e),T||(T=!0,N.then(V)),e.$$.dirty.fill(0)),e.$$.dirty[n/31|0]|=1<<n%31}function J(e,n,t,o,s,r,i,a=[-1]){const c=h;F(e);const f=e.$$={fragment:null,ctx:[],props:r,update:l,not_equal:s,bound:d(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(c?c.$$.context:[])),callbacks:d(),dirty:a,skip_bound:!1,root:n.target||c.$$.root};i&&i(f.root);let p=!1;if(f.ctx=t?t(e,n.props||{},((n,t,...o)=>{const r=o.length?o[0]:t;return f.ctx&&s(f.ctx[n],f.ctx[n]=r)&&(!f.skip_bound&&f.bound[n]&&f.bound[n](r),p&&G(e,n)),t})):[],f.update(),p=!0,u(f.before_update),f.fragment=!!o&&o(f.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);f.fragment&&f.fragment.l(e),e.forEach(w)}else f.fragment&&f.fragment.c();n.intro&&R(e.$$.fragment),H(e,n.target,n.anchor,n.customElement),V()}F(c)}class Q{$destroy(){U(this,1),this.$destroy=l}$on(e,n){if(!f(n))return l;const t=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return t.push(n),()=>{const e=t.indexOf(n);-1!==e&&t.splice(e,1)}}$set(e){var n;this.$$set&&(n=e,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}let W=!1;const X=[];function Y(e,n){if(window.google&&window.google.maps&&window.google.maps.places)return void n();if(n&&X.push(n),W)return;W=!0;const t=document.createElement("script");t.async=!0,t.defer=!0,t.onload=Z,t.src=`https://maps.googleapis.com/maps/api/js?key=${encodeURIComponent(e)}&libraries=places`,t.type="text/javascript",document.head.appendChild(t)}function Z(){let e;for(W=!1;e=X.pop();)e()}function ee(e){let n,t,o,s;return{c(){n=x("input"),E(n,"class",t=e[7].class),E(n,"placeholder",e[0]),n.value=e[1],n.required=e[2],E(n,"pattern",e[3]),A(n,"input",!0)},m(t,r){v(t,n,r),e[11](n),o||(s=[S(n,"change",e[5]),S(n,"keydown",e[6])],o=!0)},p(e,[o]){128&o&&t!==(t=e[7].class)&&E(n,"class",t),1&o&&E(n,"placeholder",e[0]),2&o&&n.value!==e[1]&&(n.value=e[1]),4&o&&(n.required=e[2]),8&o&&E(n,"pattern",e[3]),128&o&&A(n,"input",!0)},i:l,o:l,d(t){t&&w(n),e[11](null),o=!1,u(s)}}}function ne(e,n,t){let o,{apiKey:s}=n,{options:r}=n,{placeholder:i}=n,{value:l=""}=n,{required:c=!1}=n,{pattern:d=""}=n,{onSelect:u}=n;const f=z();let p;function m(){t(4,p.value="",p),h()}function h(){""===p.value&&g(null)}function g(e){o=e&&e.text||"",f("place_changed",e)}return j((()=>{Y(s,(()=>{t(8,r.types=["street_address","premise","subpremise","point_of_interest"],r);const e=new google.maps.places.Autocomplete(p,Object.assign({},r));e.addListener("place_changed",(()=>{const n=e.getPlace();(function(e){const n=r&&r.fields||["geometry"];return e.hasOwnProperty(n[0])})(n)&&(u(n),g({place:n,text:p.value}))})),f("ready"),setTimeout((()=>{p.setAttribute("autocomplete","one-time-code")}),2e3)}))})),e.$$set=e=>{t(7,n=a(a({},n),b(e))),"apiKey"in e&&t(9,s=e.apiKey),"options"in e&&t(8,r=e.options),"placeholder"in e&&t(0,i=e.placeholder),"value"in e&&t(1,l=e.value),"required"in e&&t(2,c=e.required),"pattern"in e&&t(3,d=e.pattern),"onSelect"in e&&t(10,u=e.onSelect)},e.$$.update=()=>{2&e.$$.dirty&&(o=l||"")},n=b(n),[i,l,c,d,p,h,function(e){const n=document.getElementsByClassName("pac-item").length;if("Enter"===e.key||"Tab"===e.key)if(n){document.getElementsByClassName("pac-item-selected").length||function(){const e=new KeyboardEvent("keydown",{key:"ArrowDown",code:"ArrowDown",keyCode:40});p.dispatchEvent(e)}()}else(function(e){return o!==e})(p.value)&&setTimeout(m,10);else"Escape"===e.key&&setTimeout(m,10);n&&"Enter"===e.key&&e.preventDefault()},n,r,s,u,function(e){P[e?"unshift":"push"]((()=>{p=e,t(4,p)}))}]}class te extends Q{constructor(e){super(),J(this,e,ne,ee,p,{apiKey:9,options:8,placeholder:0,value:1,required:2,pattern:3,onSelect:10})}}const oe=[];const se=["stateShort","zip","availability","servingNow"],re=["state_id","zip","Availability","serving_now"];const ie={state_id:"stateShort",zip:"zip",Availability:"availability",serving_now:"servingNow"},le=e=>{const n=e.split("\n");if(n.length<1)return;const[t,...o]=n,s=t.split(",");if(function(e){return re.reduce(((n,t)=>n&&e.includes(t)),!0)}(s))return o.map((e=>{const n={},t=e.split(",");if(s.forEach(((e,o)=>{const s=ie[e];void 0!==s&&(n[s]=`${t[o]}`)})),function(e){const n=Object.keys(e);return se.reduce(((e,t)=>e&&n.includes(t)),!0)}(n))return n;console.warn(`Found invalid deregulated row: ${n}`)}),[]);throw new Error(`Missing required deregulated zip column names: ${s}`)},ae=[],ce=e=>{const n=function(e,n=l){let t;const o=new Set;function s(n){if(p(e,n)&&(e=n,t)){const n=!oe.length;for(const n of o)n[1](),oe.push(n,e);if(n){for(let e=0;e<oe.length;e+=2)oe[e][0](oe[e+1]);oe.length=0}}}return{set:s,update:function(n){s(n(e))},subscribe:function(r,i=l){const a=[r,i];return o.add(a),1===o.size&&(t=n(s)||l),r(e),()=>{o.delete(a),0===o.size&&t&&(t(),t=null)}}}}(ae);return{store:n,load:async()=>{try{const t=await(async e=>{const n=await fetch(e.zipsCsvUrl),t=await(await n.blob()).text();return le(t)})(e);n.set(t)}catch(e){console.error("Cannot load zips",e)}}}};function de(e){let n,t;return{c(){n=x("p"),t=_(e[4]),E(n,"class","preorder-address-error-message svelte-1to51eu")},m(e,o){v(e,n,o),y(n,t)},p(e,n){16&n&&k(t,e[4])},d(e){e&&w(n)}}}function ue(e){let n,t,o,s,r,i,l,a,c,d,u,f,p;i=new te({props:{class:"location-search-input",apiKey:e[0],placeholder:"See if your home qualifies",onSelect:e[9],options:{componentRestrictions:{country:"us"}}}});let h=e[4]&&de(e);return{c(){var p,g,b;n=x("div"),t=x("div"),o=x("img"),r=$(),(p=i.$$.fragment)&&p.c(),l=$(),a=x("button"),c=_(e[1]),d=$(),h&&h.c(),u=$(),f=x("div"),g=o.src,b=s="https://cdn.jsdelivr.net/gh/BasePowerCompany/preorder-booking@1.0.1/public/Base_files/map-pin.svg",m||(m=document.createElement("a")),m.href=b,g!==m.href&&E(o,"src","https://cdn.jsdelivr.net/gh/BasePowerCompany/preorder-booking@1.0.1/public/Base_files/map-pin.svg"),E(o,"alt","Map pin icon"),E(o,"class","svelte-1to51eu"),E(t,"class","input-address-container svelte-1to51eu"),E(a,"class","submitAddressButton button secondary w-button svelte-1to51eu"),E(n,"class","input-address-wrap svelte-1to51eu"),E(f,"class","focus_overlay svelte-1to51eu")},m(e,s){v(e,n,s),y(n,t),y(t,o),y(t,r),H(i,t,null),y(n,l),y(n,a),y(a,c),y(n,d),h&&h.m(n,null),v(e,u,s),v(e,f,s),p=!0},p(e,[t]){const o={};1&t&&(o.apiKey=e[0]),28&t&&(o.onSelect=e[9]),i.$set(o),(!p||2&t)&&k(c,e[1]),e[4]?h?h.p(e,t):(h=de(e),h.c(),h.m(n,null)):h&&(h.d(1),h=null)},i(e){p||(R(i.$$.fragment,e),p=!0)},o(e){!function(e,n,t,o){if(e&&e.o){if(D.has(e))return;D.add(e),(void 0).c.push((()=>{D.delete(e),o&&(t&&e.d(1),o())})),e.o(n)}else o&&o()}(i.$$.fragment,e),p=!1},d(e){e&&w(n),U(i),h&&h.d(),e&&w(u),e&&w(f)}}}function fe(e,n,t){let o,s,{googlePublicApiKey:r}=n,{googleSheetConfig:i}=n,{addressCtaText:l="Get started"}=n,{onAddressSelect:a}=n,{onAddressSubmitSuccess:c=()=>{}}=n;const{store:d,load:u}=ce(i);let f;g(e,d,(e=>t(10,s=e))),j((async()=>{u();const e=document.querySelector(".input-address-container"),n=document.querySelector(".focus_overlay"),t=document.querySelector("input.location-search-input"),o=document.querySelector("button.submitAddressButton");null==e||e.addEventListener("click",(()=>{null==n||n.classList.add("show"),e.classList.add("focused"),t instanceof HTMLInputElement&&(t.placeholder="Enter your address"),null==o||o.classList.add("hide")})),null==e||e.addEventListener("keydown",(()=>{t instanceof HTMLInputElement&&(t.placeholder="")})),null==n||n.addEventListener("click",(()=>{n.classList.remove("show"),null==o||o.classList.remove("hide"),null==e||e.classList.remove("focused")}))}));const p=()=>{if(!(null==f?void 0:f.postalCode)||!(null==f?void 0:f.houseNumber)||!(null==f?void 0:f.street))return void t(4,o="Please enter a full address.");const e=s.find((e=>e.zip===f.postalCode))||null;null==c||c(f,e?"lead-preorder-form":"lead-newsletter-form",e)};return e.$$set=e=>{"googlePublicApiKey"in e&&t(0,r=e.googlePublicApiKey),"googleSheetConfig"in e&&t(7,i=e.googleSheetConfig),"addressCtaText"in e&&t(1,l=e.addressCtaText),"onAddressSelect"in e&&t(2,a=e.onAddressSelect),"onAddressSubmitSuccess"in e&&t(8,c=e.onAddressSubmitSuccess)},t(4,o=""),t(3,f=void 0),[r,l,a,f,o,d,p,i,c,e=>{const n=(e=>{console.log(e);const n=(e.address_components||[]).reduce((function(e,n){return n.types.forEach((function(t){e[t]=n})),e}),{}),t=(e,t=!1)=>e in n?t?n[e].short_name:n[e].long_name:null;return{title:e.name,formattedAddress:e.formatted_address,externalId:e.place_id,externalUrl:e.url,houseNumber:t("street_number"),street:t("route"),street_2:[t("floor"),t("subpremise")].filter((e=>!!e)).join(",")||null,city:t("locality")||t("sublocality")||t("sublocality_level_1")||t("neighborhood")||t("administrative_area_level_3")||t("administrative_area_level_2"),county:t("administrative_area_level_2"),stateShort:t("administrative_area_level_1",!0),stateLong:t("administrative_area_level_1"),countryCode:t("country",!0),countryLong:t("country"),postalCode:t("postal_code")}})(e);a?.(n),t(4,o=""),t(3,f=n),p()}]}class pe extends Q{constructor(e){super(),J(this,e,fe,ue,p,{googlePublicApiKey:0,googleSheetConfig:7,addressCtaText:1,onAddressSelect:2,onAddressSubmitSuccess:8})}}const me={initialize:e=>{const{targetElAddressInput:n,googlePublicApiKey:o,googleSheetConfig:l,hsFormSuccess:a,hsFormNewsletter:c,querySelectorClickToOpenForm:d,onAddressSelect:u,onAddressSubmitSuccess:f}=e;(({hsFormSuccess:e,hsFormNewsletter:n})=>{window.hbspt.forms.create(Object.assign(Object.assign({},e),{onFormReady:e=>{const n=i(e);window.hsFormPreorder=n,t(n)},onFormSubmit:n=>{var t;const o=i(n);o.querySelector('input[name="email"]').value,null===(t=e.onFormSubmit)||void 0===t||t.call(e,o)},onFormSubmitted:(n,t)=>{var o;null===(o=e.onFormSubmitted)||void 0===o||o.call(e,n,Object.assign(Object.assign({},t),{submissionValues:Object.assign(Object.assign({},t.submissionValues),s.get())}))}})),window.hbspt.forms.create(Object.assign(Object.assign({},n),{onFormReady:e=>{const n=i(e);window.hsFormNewsletter=n,t(n)},onFormSubmitted:(e,t)=>{var o;null===(o=n.onFormSubmitted)||void 0===o||o.call(n,e,Object.assign(Object.assign({},t),{submissionValues:Object.assign(Object.assign({},t.submissionValues),r.get())}))}}))})({hsFormSuccess:a,hsFormNewsletter:c}),document.querySelectorAll(d).forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),n.scrollIntoView({behavior:"smooth"}),setTimeout((()=>{const e=n.querySelector("input");e&&e.focus()}),1e3)}))}));return new pe({target:n,props:{googlePublicApiKey:o,googleSheetConfig:l,onAddressSelect:u,onAddressSubmitSuccess:f}})}};window.BasePreorderApp=me}));
//# sourceMappingURL=embed.js.map
